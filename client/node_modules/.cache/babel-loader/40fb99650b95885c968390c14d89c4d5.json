{"ast":null,"code":"import _defineProperty from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProject(_ref){var match=_ref.match;var _useState=useState({title:\"\",content:\"\",date:\"\",id:\"\"}),_useState2=_slicedToArray(_useState,2),project=_useState2[0],setProject=_useState2[1];var history=useHistory();useEffect(function(){var getProject=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem('tokenStore');if(!match.params.id){_context.next=6;break;}_context.next=4;return axios.get(\"/api/projects/\".concat(match.params.id),{headers:{Authorization:token}});case 4:res=_context.sent;setProject({title:res.data.title,content:res.data.content,date:new Date(res.data.date).toLocaleDateString,id:res.data._id});case 6:case\"end\":return _context.stop();}}},_callee);}));return function getProject(){return _ref2.apply(this,arguments);};}();getProject();},[match.params.id]);var onChangeInput=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _e$target,name,value;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_e$target=e.target,name=_e$target.name,value=_e$target.value;setProject(_objectSpread(_objectSpread({},project),{},_defineProperty({},name,value)));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onChangeInput(_x){return _ref3.apply(this,arguments);};}();var editProject=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var token,title,content,date,id,newProject;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.prev=1;token=localStorage.getItem(\"tokenStore\");if(!token){_context3.next=9;break;}title=project.title,content=project.content,date=project.date,id=project.id;newProject={title:title,content:content,date:date};_context3.next=8;return axios.put(\"/api/projects/\".concat(id),newProject,{headers:{Authorization:token}});case 8:return _context3.abrupt(\"return\",history.push(\"/\"));case 9:_context3.next=13;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function editProject(_x2){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"create-note\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Items\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:editProject,autoComplete:\"off\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:project.title,id:\"title\",name:\"title\",required:true,onChange:onChangeInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:project.content,id:\"content\",name:\"content\",required:true,rows:\"10\",onChange:onChangeInput})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"date\",children:[\"Date:\",project.date]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",name:\"date\",onChange:onChangeInput})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})]})]});}","map":{"version":3,"sources":["/home/ayush/Documents/WAD/ead/client/src/components/project/EditProject.js"],"names":["React","useState","useEffect","axios","useHistory","EditProject","match","title","content","date","id","project","setProject","history","getProject","token","localStorage","getItem","params","get","headers","Authorization","res","data","Date","toLocaleDateString","_id","onChangeInput","e","target","name","value","editProject","preventDefault","newProject","put","push"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function EditProject({ match }) {\n  const [project, setProject] = useState({\n    title: \"\",\n    content: \"\",\n      date: \"\",\n      id:\"\"\n  });\n  const history = useHistory();\n\n    useEffect(() => {\n        const getProject = async () => {\n            const token = localStorage.getItem('tokenStore')\n            if (match.params.id) {\n                const res = await axios.get(`/api/projects/${match.params.id}`, {\n                    headers: {Authorization:token}\n                })\n                setProject({\n                  title: res.data.title,\n                  content: res.data.content,\n                  date: new Date(res.data.date).toLocaleDateString,\n                  id: res.data._id,\n                });\n            }\n            \n        }\n        getProject()\n    },[match.params.id])\n    \n  const onChangeInput = async (e) => {\n    const { name, value } = e.target;\n    setProject({ ...project, [name]: value });\n  };\n  const editProject = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem(\"tokenStore\");\n      if (token) {\n        const { title, content, date,id } = project;\n        const newProject = {\n          title,\n          content,\n          date,\n        };\n\n        await axios.put(`/api/projects/${id}`, newProject, {\n          headers: { Authorization: token },\n        });\n        return history.push(\"/\");\n      }\n    } catch (error) {}\n  };\n\n  return (\n    <div className=\"create-note\">\n      <h2>Edit Items</h2>\n      <form onSubmit={editProject} autoComplete=\"off\">\n        <div className=\"row\">\n          <label htmlFor=\"title\">Title</label>\n          <input\n            type=\"text\"\n            value={project.title}\n            id=\"title\"\n            name=\"title\"\n            required\n            onChange={onChangeInput}\n          />\n        </div>\n        <div className=\"row\">\n          <label htmlFor=\"content\">Content</label>\n          <textarea\n            type=\"text\"\n            value={project.content}\n            id=\"content\"\n            name=\"content\"\n            required\n            rows=\"10\"\n            onChange={onChangeInput}\n          />\n        </div>\n        <label htmlFor=\"date\">Date:{project.date}</label>\n        <div className=\"row\">\n          <input\n            type=\"date\"\n            id=\"date\"\n            name=\"date\"\n            \n            onChange={onChangeInput}\n          />\n        </div>\n        <button type=\"submit\">Save</button>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}