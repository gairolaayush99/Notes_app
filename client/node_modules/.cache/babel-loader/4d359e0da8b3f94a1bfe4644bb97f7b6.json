{"ast":null,"code":"import _regeneratorRuntime from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{format}from'timeago.js';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var getProjects=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/projects/\",{headers:{Authorization:token}});case 2:res=_context.sent;setProjects(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getProjects(_x){return _ref.apply(this,arguments);};}();useEffect(function(){var token=localStorage.getItem(\"tokenStore\");setToken(token);if(token){getProjects(token);}},[]);var deleteProject=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!token){_context2.next=5;break;}_context2.next=4;return axios.delete(\"api/projects/\".concat(id),{headers:{Authorization:token}});case 4:getProjects(token);case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);window.location.href=\"/\";case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function deleteProject(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"note-wrapper\",children:projects.map(function(project){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h4\",{title:project.title,children:project.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-wrapper\",children:/*#__PURE__*/_jsx(\"p\",{style:{paddingBottom:\"100px\"},children:project.content})}),/*#__PURE__*/_jsx(\"p\",{className:\"date\",children:format(project.date)}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[project.name,/*#__PURE__*/_jsx(Link,{to:\"edit/\".concat(project._id),children:\"edit\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:function onClick(){return deleteProject(project._id);},children:\"x\"})]},project._id);})});}","map":{"version":3,"sources":["/home/ayush/Documents/WAD/ead/client/src/components/project/Home.js"],"names":["React","useState","useEffect","Link","format","axios","Home","projects","setProjects","token","setToken","getProjects","get","headers","Authorization","res","data","localStorage","getItem","deleteProject","id","delete","window","location","href","map","project","title","paddingBottom","content","date","name","_id"],"mappings":"kWAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAGA,cAAe,SAASC,CAAAA,IAAT,EAAgB,eACKL,QAAQ,CAAC,EAAD,CADb,wCACpBM,QADoB,eACVC,WADU,8BAEDP,QAAQ,CAAC,EAAD,CAFP,yCAEpBQ,KAFoB,eAEbC,QAFa,eAI3B,GAAMC,CAAAA,WAAW,0FAAG,iBAAOF,KAAP,gJACGJ,CAAAA,KAAK,CAACO,GAAN,CAAU,gBAAV,CAA4B,CAC5CC,OAAO,CAAE,CACPC,aAAa,CACXL,KAFK,CADmC,CAA5B,CADH,QACTM,GADS,eAQhBP,WAAW,CAACO,GAAG,CAACC,IAAL,CAAX,CARgB,sDAAH,kBAAXL,CAAAA,WAAW,4CAAjB,CAUAT,SAAS,CAAC,UAAM,CACZ,GAAMO,CAAAA,KAAK,CAAGQ,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAd,CACAR,QAAQ,CAACD,KAAD,CAAR,CAEA,GAAIA,KAAJ,CAAW,CAEPE,WAAW,CAACF,KAAD,CAAX,CACH,CACJ,CARQ,CAQN,EARM,CAAT,CASA,GAAMU,CAAAA,aAAa,2FAAG,kBAAOC,EAAP,2IAEVX,KAFU,iDAGJJ,CAAAA,KAAK,CAACgB,MAAN,wBAA6BD,EAA7B,EAAmC,CACrCP,OAAO,CAAE,CAACC,aAAa,CAACL,KAAf,CAD4B,CAAnC,CAHI,QAMVE,WAAW,CAACF,KAAD,CAAX,CANU,0FASda,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,GAArB,CATc,sEAAH,kBAAbL,CAAAA,aAAa,8CAAnB,CAcA,mBACE,YAAK,SAAS,CAAC,cAAf,UACGZ,QAAQ,CAACkB,GAAT,CAAa,SAACC,OAAD,qBACV,aAAK,SAAS,CAAC,MAAf,wBACI,WAAI,KAAK,CAAEA,OAAO,CAACC,KAAnB,UAA4BD,OAAO,CAACC,KAApC,EADJ,cAEA,YAAK,SAAS,CAAC,cAAf,uBACE,UAAG,KAAK,CAAE,CAACC,aAAa,CAAC,OAAf,CAAV,UACYF,OAAO,CAACG,OADpB,EADF,EAFA,cAOI,UAAG,SAAS,CAAC,MAAb,UAAuBzB,MAAM,CAACsB,OAAO,CAACI,IAAT,CAA7B,EAPJ,cAQA,aAAK,SAAS,CAAC,aAAf,WACUJ,OAAO,CAACK,IADlB,cAEQ,KAAC,IAAD,EAAM,EAAE,gBAAWL,OAAO,CAACM,GAAnB,CAAR,kBAFR,GARA,cAYI,eAAQ,SAAS,CAAC,OAAlB,CAA0B,OAAO,CAAE,yBAAKb,CAAAA,aAAa,CAACO,OAAO,CAACM,GAAT,CAAlB,EAAnC,eAZJ,GAA4BN,OAAO,CAACM,GAApC,CADU,EAAb,CADH,EADF,CAoBH","sourcesContent":["import React, {useState,useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { format } from 'timeago.js'\nimport axios from 'axios'\n\n\nexport default function Home() {\n    const [projects, setProjects] = useState([])\n    const [token, setToken] = useState('');\n    \n    const getProjects = async (token) => {\n         const res = await axios.get(\"/api/projects/\", {\n           headers: {\n             Authorization:\n               token,\n           },\n         });\n       \n        setProjects(res.data)\n    }\n    useEffect(() => {\n        const token = localStorage.getItem(\"tokenStore\");\n        setToken(token)\n        \n        if (token) {\n            \n            getProjects(token)            \n        }\n    }, [])\n    const deleteProject = async (id) => {\n        try {\n            if (token) {\n                await axios.delete(`api/projects/${id}`, {\n                    headers: {Authorization:token}\n                })\n                getProjects(token)\n            }\n        } catch (error) {\n            window.location.href=\"/\"\n        }\n        \n    }\n\n    return (\n      <div className=\"note-wrapper\">\n        {projects.map((project) => (\n            <div className=\"card\" key={ project._id}>\n                <h4 title={project.title}>{ project.title}</h4>\n            <div className=\"text-wrapper\">\n              <p style={{paddingBottom:\"100px\"}}>\n                        { project.content}\n              </p>\n            </div>\n                <p className=\"date\" >{ format(project.date)}</p>\n            <div className=\"card-footer\">\n                    { project.name}\n                    <Link to={ `edit/${project._id}`}>edit</Link>\n            </div>\n                <button className=\"close\" onClick={()=> deleteProject(project._id)}>x</button>\n          </div>\n        ))}\n      </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}