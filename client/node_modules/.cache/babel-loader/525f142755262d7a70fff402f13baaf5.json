{"ast":null,"code":"import _regeneratorRuntime from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import Login from'./components/Login';import Projects from'./components/Projects';import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];useEffect(function(){var checkLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,verified;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem('tokenStore');if(!token){_context.next=11;break;}_context.next=4;return axios.get('/users/verify',{headers:{Authorization:token}});case 4:verified=_context.sent;console.log(verified);setIsLogin(verified.data);if(!(verified.data===false)){_context.next=9;break;}return _context.abrupt(\"return\",localStorage.clear());case 9:_context.next=12;break;case 11:setIsLogin(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function checkLogin(){return _ref.apply(this,arguments);};}();checkLogin();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:isLogin?/*#__PURE__*/_jsx(Projects,{setIsLogin:setIsLogin}):/*#__PURE__*/_jsx(Login,{setIsLogin:setIsLogin})});}export default App;","map":{"version":3,"sources":["/home/ayush/Documents/WAD/ead/client/src/App.js"],"names":["React","useState","useEffect","axios","Login","Projects","App","isLogin","setIsLogin","checkLogin","token","localStorage","getItem","get","headers","Authorization","verified","console","log","data","clear"],"mappings":"kWAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,C,2CACA,QAASC,CAAAA,GAAT,EAAe,eACiBL,QAAQ,CAAC,KAAD,CADzB,wCACNM,OADM,eACGC,UADH,eAGbN,SAAS,CAAC,UAAM,CACd,GAAMO,CAAAA,UAAU,0FAAG,sJACXC,KADW,CACHC,YAAY,CAACC,OAAb,CAAqB,YAArB,CADG,KAEbF,KAFa,gDAGQP,CAAAA,KAAK,CAACU,GAAN,CAAU,eAAV,CAA2B,CAChDC,OAAO,CAAE,CAAEC,aAAa,CAAEL,KAAjB,CADuC,CAA3B,CAHR,QAGTM,QAHS,eAMfC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAR,UAAU,CAACQ,QAAQ,CAACG,IAAV,CAAV,CAPe,KAQXH,QAAQ,CAACG,IAAT,GAAkB,KARP,0DAQqBR,YAAY,CAACS,KAAb,EARrB,wCAWfZ,UAAU,CAAC,KAAD,CAAV,CAXe,uDAAH,kBAAVC,CAAAA,UAAU,0CAAhB,CAcAA,UAAU,GACT,CAhBM,CAiBR,EAjBQ,CAAT,CAmBA,mBACE,YAAK,SAAS,CAAC,KAAf,UACGF,OAAO,cACN,KAAC,QAAD,EAAU,UAAU,CAAEC,UAAtB,EADM,cAGN,KAAC,KAAD,EAAO,UAAU,CAAEA,UAAnB,EAJJ,EADF,CASD,CAED,cAAeF,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Login from './components/Login';\nimport Projects from './components/Projects';\nfunction App() {\n  const [isLogin, setIsLogin] = useState(false)\n  \n  useEffect(() => {\n    const checkLogin = async () => {\n      const token = localStorage.getItem('tokenStore')\n      if (token) {\n        const verified = await axios.get('/users/verify', {\n          headers: { Authorization: token }\n        })\n        console.log(verified)\n        setIsLogin(verified.data)\n        if (verified.data === false) return localStorage.clear()\n        \n      } else {\n        setIsLogin(false)\n      }\n    }\n    checkLogin()\n    }\n  ,[])\n\n  return (\n    <div className=\"App\">\n      {isLogin ? (\n        <Projects setIsLogin={setIsLogin} />\n      ) : (\n        <Login setIsLogin={setIsLogin} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}