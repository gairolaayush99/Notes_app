{"ast":null,"code":"import _regeneratorRuntime from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ayush/Documents/WAD/ead/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React from'react';import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){var setIsLogin=_ref.setIsLogin;var _useState=useState({name:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),err=_useState4[0],setErr=_useState4[1];var onChangeInput=function onChangeInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));setErr(\"\");};var registerSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/users/register\",{username:user.name,email:user.email,password:user.password});case 4:res=_context.sent;setUser({name:\"\",email:\"\",password:\"\"});setErr(res.data.msg);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setErr(_context.t0.response.data.msg);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function registerSubmit(_x){return _ref2.apply(this,arguments);};}();var loginSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(\"/users/login\",{email:user.email,password:user.password});case 4:res=_context2.sent;setUser({name:\"\",email:\"\",password:\"\"});localStorage.setItem(\"tokenStore\",res.data.token);setIsLogin(true);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);_context2.t0.response.data.msg&&setErr(_context2.t0.response.data.msg);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function loginSubmit(_x2){return _ref3.apply(this,arguments);};}();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),onLogin=_useState6[0],setOnLogin=_useState6[1];var style={visibility:onLogin?\"visible\":\"hidden\",opacity:onLogin?1:0};return/*#__PURE__*/_jsxs(\"section\",{className:\"login-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login create-note\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"login-email\",placeholder:\"Email\",required:true,value:user.email,onChange:onChangeInput}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"login-password\",placeholder:\"Password\",required:true,value:user.password,autoComplete:\"true\",onChange:onChangeInput}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You don't have an account\",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOnLogin(true);},children:\" Register Now\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:err})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register create-note\",style:style,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:registerSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"register-name\",placeholder:\"User Name\",required:true,value:user.name,onChange:onChangeInput}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"register-email\",placeholder:\"Email\",required:true,value:user.email,onChange:onChangeInput}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"register-password\",placeholder:\"Password\",required:true,value:user.password,autoComplete:\"true\",onChange:onChangeInput}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You have an account\",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOnLogin(false);},children:\" Login Now\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:err})]})]})]});}","map":{"version":3,"sources":["/home/ayush/Documents/WAD/ead/client/src/components/Login.js"],"names":["axios","React","useState","useEffect","Login","setIsLogin","name","email","password","user","setUser","err","setErr","onChangeInput","e","target","value","registerSubmit","preventDefault","post","username","res","data","msg","response","loginSubmit","localStorage","setItem","token","onLogin","setOnLogin","style","visibility","opacity"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React from 'react'\nimport { useState, useEffect } from \"react\";\nexport default function Login({ setIsLogin }) {\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  });\n  const [err, setErr] = useState(\"\");\n  const onChangeInput = (e) => {\n    const { name, value } = e.target;\n    setUser({ ...user, [name]: value });\n    setErr(\"\");\n  };\n  const registerSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(\"/users/register\", {\n        username: user.name,\n        email: user.email,\n        password: user.password,\n      });\n      setUser({\n        name: \"\",\n        email: \"\",\n        password: \"\",\n      });\n      setErr(res.data.msg);\n    } catch (error) {\n      error.response.data.msg && setErr(error.response.data.msg);\n    }\n  };\n\n  const loginSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(\"/users/login\", {\n        email: user.email,\n        password: user.password,\n      });\n      setUser({\n        name: \"\",\n        email: \"\",\n        password: \"\",\n      });\n        localStorage.setItem(\"tokenStore\", res.data.token)\n        setIsLogin(true)\n    } catch (error) {\n       \n      error.response.data.msg && setErr(error.response.data.msg);\n    }\n  };\n  const [onLogin, setOnLogin] = useState(false)\n  const style = {\n    visibility: onLogin ? \"visible\" : \"hidden\",\n    opacity: onLogin ? 1:0\n  }\n\n  return (\n    <section className=\"login-page\">\n      <div className=\"login create-note\">\n        <h2>Login</h2>\n        <form onSubmit={loginSubmit}>\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"login-email\"\n            placeholder=\"Email\"\n            required\n            value={user.email}\n            onChange={onChangeInput}\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            id=\"login-password\"\n            placeholder=\"Password\"\n            required\n            value={user.password}\n            autoComplete=\"true\"\n            onChange={onChangeInput}\n          />\n          <button type=\"submit\">Login</button>\n          <p>\n            You don't have an account\n            <span onClick={() => setOnLogin(true)}> Register Now</span>\n          </p>\n          <h3>{err}</h3>\n        </form>\n      </div>\n      <div className=\"register create-note\" style={style}>\n        <h2>Register</h2>\n        <form onSubmit={registerSubmit}>\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"register-name\"\n            placeholder=\"User Name\"\n            required\n            value={user.name}\n            onChange={onChangeInput}\n          />\n\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"register-email\"\n            placeholder=\"Email\"\n            required\n            value={user.email}\n            onChange={onChangeInput}\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            id=\"register-password\"\n            placeholder=\"Password\"\n            required\n            value={user.password}\n            autoComplete=\"true\"\n            onChange={onChangeInput}\n          />\n          <button type=\"submit\">Register</button>\n          <p>\n            You have an account\n            <span onClick={() => setOnLogin(false)}> Login Now</span>\n          </p>\n          <h3>{err}</h3>\n        </form>\n      </div>\n    </section>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}